<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body>
    <div></div>
    <button id="버튼">버튼</button>

    <script>
        // 'use strict';
        // 자바 스크립트를 엄격하게 실행

        //this;
        // 메소드의 주인님을 지칭함.
        // 첫번째 뜻 : 그냥 쓰거나, 일반 함수 안에서 쓰면 {window}
        // 두번째 뜻 : 오브젝트 내 함수(메소드)에서 쓰면 그 함수를 가지고 있는 오브젝트를 뜻함.

        let 오브젝트 = {
            data : 'kim',
            함수 : function() {
                console.log('안녕');
            },
            디스함수 : () => {
                console.log(this);
            }
        }

        오브젝트.data;
        오브젝트.함수();
        오브젝트.디스함수();

        // javascript 기존 문법 : function() {}
        // javascript 신 문법 : () => {}
        // -> 신 문법 특징 : this값을 함수 밖에 있던 것을 그대로 씀

        console.log(this);


        // 아래는 오브젝트 생성 기계(Constructor)
        // this 세번째 뜻 (Constructor 안에서) : 기계 안에서 쓰면 새로 생성되는 오브젝트를 뜻함.
        function 기계() {
            this.이름 = 'kim'; // instance - 새로 생성되는 오브젝트
        }

        let 오브젝트1 = new 기계();

        console.log(오브젝트1);

        $('#버튼').on('click', function(e) {
            console.log(this);
            console.log(e.currentTarget);
            // this 네번째 뜻 (이벤트리스너 안에서) : 지금 이벤트가 동작하고 있는 곳
            // 여기서의 this == e.currentTarget

            let 배열 = [1, 2, 3];
            배열.forEach(function(a) {
                console.log(a);
                console.log(this);
            })
            // 바로 위에 forEach함수 안에, 또 함수가 들어감
            // 이를 보고 콜백함수라고 함.
            // @@ 함수가 쓰인 위치에 따라 this값이 변함
        })

        let 오브젝트2 = {
            이름들 : ['김', '이', '박'],
            함수 : function() {
                오브젝트2.이름들.forEach(() => {
                    console.log(this);
                    // 일반 함수기 때문에, window 출력
                    // 참고로 바로 상위 요소가 일반 함수임.

                    // arrow function으로 바꾸면 외부 this값 그대로 재사용 가능
                })
            }
        }
        오브젝트2.함수();


        // 함수 만드는법 1, 2
        //function 함수() {
        //
        //}
        //
        //let 함수 = function() {
        //
        //}

        // 함수 만드는법 3
        let 함수 = (a) => { return a + 10 }

        console.log(함수(5));

        // 함수는 그냥 쓰는 문법이 아님
        // 1. 코드들을 기능으로 묶고 싶을 때 사용
        // 2. 입출력 기계를 만들고 싶을 때 사용

        // Arrow function 장점
        // 1. 입출력 기계 만들 때 보기 쉬움
        // 2. 파라미터가 하나밖애 없을 때 소괄호 생략 가능 ex) let 함수 = a => {}
        // 3. 코드가 한줄이면, 중괄호도 생략 가능 ex) let gㅏㅁ수 = a => a + 10;

        // Arrow function 예시
        [1,2,3,4].forEach(a => console.log(a) );

        //$('.버튼').on('click', (e) => {
        //     this값을 새로 만들지 않음
        //     Arrow function을 사용하고싶으면, e.currentTarget; 사용하면 됨.
        //});

        let 오브젝트3 = {
            함수 : (e) => {
                // 여기서도 this를 쓰고 싶으면,
                // e.currentTarget; 사용하면 됨.
            }
        }

        오브젝트3.함수();

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
